(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{209:function(n,t,e){"use strict";e.r(t),t.default=e.p+"assets/img/background-gnss.37a3090.png"},212:function(n,t,e){var a=e(223);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals),(0,e(2).default)("416721eb",a,!0,{})},213:function(n,t,e){var a=e(225);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals),(0,e(2).default)("8d507d0e",a,!0,{})},214:function(n,t,e){var a=e(227);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals),(0,e(2).default)("62c0e98a",a,!0,{})},215:function(n,t,e){var a=e(229);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals),(0,e(2).default)("7b8c2116",a,!0,{})},222:function(n,t,e){"use strict";e(212)},223:function(n,t,e){(t=e(1)(!1)).push([n.i,"\n.gnss-file a.station-link {\n  line-height: 1;\n  text-decoration: none;\n  color: #337ab7;\n  cursor:pointer;\n}\n.gnss-file {\n  display: grid;\n  grid-template-columns: 10px minmax(120px,1fr) minmax(120px,0.8fr)  minmax(150px,1.2fr) minmax(100px,0.8fr) minmax(50px,0.3fr);\n  grid-gap: 5px;\n  grid-template-rows: 14px 30px; \n  /*grid-auto-rows: minmax(100px, auto);*/\n  font-size:0.8em;\n  \n  border-bottom:1px solid lightgrey;\n}\n.header.gnss-file {\n\n  background: #ddd;\n  font-weight:600;\n  color:black;\n  border-bottom:1px solid grey;\n}\n.gnss-file-title{\n  grid-column: 1/5;\n  grid-row: 1;\n  padding-left: 5px;\n  padding-top:5px;\n  font-size: 1em;\n  font-weight:600;\n  color: black;\n}\n.header .gnss-file-title {\n  grid-column: 1/3;\n  grid-row:1;\n}\n.gnss-file-1{\n  grid-column: 1;\n  grid-row: 2;\n}\n.gnss-file-2 {\n  grid-column: 2;\n  grid-row: 2;\n}\n.gnss-file-3-header {\n  grid-column: 3;\n  vertical-align: middle;\n  grid-row: 1/3;\n}\n.gnss-file-3-header > div {\n  line-height: 1.5;\n}\n.gnss-file-4-header {\n  grid-column: 4;\n  vertical-align: middle;\n  grid-row: 1/3;\n}\n.gnss-file-4-header > div {\n  line-height: 1.5;\n}\n.gnss-file-3 {\n  grid-column: 3;\n  grid-row: 2;\n}\n.gnss-file-4 {\n  grid-column: 4;\n  grid-row: 2;\n}\n.gnss-file-4-top {\n  grid-column: 4;\n  grid-row:1;\n}\n.gnss-file-4-bottom {\n  grid-column: 4;\n  grid-row:2;\n}\n.gnss-file-5 {\n  grid-column: 5;\n  grid-row: 2;\n}\n.gnss-file-6{\n  grid-column: 6;\n  grid-row: 2;\n}\n.gnss-file label {\n  font-weight: normal;\n  color: black;\n  line-height:1;\n  margin:0;\n}\n",""]),n.exports=t},224:function(n,t,e){"use strict";e(213)},225:function(n,t,e){(t=e(1)(!1)).push([n.i,"\n.gnss-paging > div {\n   width: calc(100% - 250px);\n   height: 33px;\n   text-align: center;\n   display: inline-block;\n   margin-left: 70px;\n}\n.gnss-paging span.mtdt-navigation span{\n  font-size: 1rem;\n  cursor: pointer;\n  margin: 0 1px;\n  padding:5px;\n cursor:pointer;\n border-radius:3px;\n /*background:#8c0209;*/\n background:grey;\n padding:3px 5px;\n color:white;\n  vertical-align:middle;\n  opacity:0.9;\n  line-height:1.2rem;\n}\n.gnss-paging span.mtdt-navigation.disabled span{\n  opacity:0.3;\n  cursor:not-allowed;\n}\n.gnss-paging span.mtdt-navigation:not(.disabled) span:hover{\n  opacity:1;\n}\n \n",""]),n.exports=t},226:function(n,t,e){"use strict";e(214)},227:function(n,t,e){(t=e(1)(!1)).push([n.i,"\ndiv.box-station {\n  display: inline-block;\noverflow: hidden;\npadding: 5px 20px 20px 20px;\nmargin:20px;\n border: 1px solid grey;\n border-radius: 10px;\n-webkit-box-shadow: 0 0 3px rgba(0,0,0,.5);\nbox-shadow: 0 0 3px rgba(0,0,0,.5);\n}\ndiv.box-station h3 {\n  margin-top: 10px;\n}\ndiv.box-station a.station-link {\n  margin: 5px;\n  line-height: 1.1;\n  text-decoration: none;\n  color: #000;\n  cursor:pointer;\n}\n\n",""]),n.exports=t},228:function(n,t,e){"use strict";e(215)},229:function(n,t,e){var a=e(1),i=e(9),s=e(209);t=a(!1);var o=i(s);t.push([n.i,"\ndiv.page-list[data-v-a1bb2adc] {\n  width:100%;\n  background: url("+o+") no-repeat center center fixed;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n}\ndiv.page-list div.form[data-v-a1bb2adc] {\n  top: 105px;\n}\ndiv.gnss-file[data-v-a1bb2adc]:nth-child(2n) {\n background: #eee;\n}\ndiv.station-content[data-v-a1bb2adc] {\n  background:white;\n  margin:auto;\n  max-width:1400px;\n  padding-bottom:20px;\n  box-shadow: 0 0 3px rgba(0,0,0,.5);\n}\ndiv.station-header[data-v-a1bb2adc] {\n  position:relative;\n  background: lightgrey;\n  margin: 0;\n  padding: 3px 5px;\n}\ndiv.station-body[data-v-a1bb2adc] {\n  padding: 3px 10px;\n}\ndiv.station-header h2[data-v-a1bb2adc] {\n  padding:0;\n  margin:5px;\n}\ndiv.array-list[data-v-a1bb2adc] {\n  border:1px solid grey;\n}\nspan.station-link[data-v-a1bb2adc] {\n  color: darkblue;\n  padding: 2px 3px;\n  cursor: pointer;\n  line-height:1.5rem;\n  border:1px dotted white;\n}\nspan.station-link[data-v-a1bb2adc]:hover {\n  border-color: grey;\n}\nspan.button.close[data-v-a1bb2adc] {\n  position: absolute;\n  right: 15px;\n  top:5px;\n  opacity:1;\n  border: 1px dotted transparent;\n}\nspan.button.close[data-v-a1bb2adc]:hover {\n  border-color:grey;\n}\nspan.gnss-sort[data-v-a1bb2adc]{\n  padding: 0 3px;\n  cursor: pointer;\n  border: 1px dotted transparent;\n}\nspan.gnss-sort.unactive[data-v-a1bb2adc] {\n  color: #555555;\n}\nspan.gnss-sort[data-v-a1bb2adc]:hover {\n  border-color: black;\n}\n",""]),n.exports=t},230:function(n,t,e){"use strict";e.r(t);var a,i=e(11),s=e(12),o=(e(0),{name:"FileRow",props:{file:{type:Object,default:null}},computed:{api:function(){return this.$store.getters.api}},methods:{goToStation:function(n){n.preventDefault(),n.stopPropagation();var t=Object.assign({},this.$route.query);this.$store.commit("setQuery",{name:"files",query:t}),delete(t=Object.assign({},this.$route.query)).network,delete t.several,this.$router.push({name:"station",params:{name:this.file.station,id:this.file.stationId},query:t})},toDateStr:function(n){return n.substring(0,10)}}}),r=(e(222),e(4)),l=Object(r.a)(o,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"gnss-file"},[t("div",{staticClass:"gnss-file-title"},[n._v(n._s(n.file.name))]),n._v(" "),t("div",{staticClass:"gnss-file-1"}),n._v(" "),t("div",{staticClass:"gnss-file-2"},[t("div",[t("label",[n._v("Station")]),n._v(":   \n         "),t("a",{staticClass:"station-link",on:{click:function(t){return n.goToStation(t)}}},[n._v(n._s(n.file.station))])]),n._v(" "),n.file.networks?t("div",[t("label",[n._v("Networks")]),n._v(": "+n._s(n.file.networks.join(", ")))]):n._e()]),n._v(" "),t("div",{staticClass:"gnss-file-3"},[t("div",[t("label",[n._v("Solution")]),n._v(": "+n._s(n.file.solution))]),n._v(" "),t("div",[t("label",[n._v("ProductType")]),n._v(": "+n._s(n.file.productType))])]),n._v(" "),t("div",{staticClass:"gnss-file-4"},[t("div",[t("label",[n._v("Temporal")]),n._v(":  "+n._s(n.toDateStr(n.file.tempStart))+" → "+n._s(n.toDateStr(n.file.tempEnd)))]),n._v(" "),t("div",[t("label",[n._v("Years")]),n._v(": "+n._s(Math.round(n.file.years))),t("label",{staticStyle:{"margin-left":"20px"}},[n._v("FillRate")]),n._v(": "+n._s(Math.round(100*n.file.properties.fillRate).toLocaleString())+"%")])]),n._v(" "),t("div",{staticClass:"gnss-file-5"},[t("div",[t("label",[n._v("Productor")]),n._v(": "+n._s(n.file.properties.operator))]),n._v(" "),n.file.properties.refFrame?t("div",[t("label",[n._v("RefFrame")]),n._v(": "+n._s(n.file.properties.refFrame))]):n._e()]),n._v(" "),t("div",{staticClass:"gnss-file-6"},[t("div",[t("a",{attrs:{href:n.api+"files/"+n.file.name+"/download",download:n.file.name}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-download"}})],1)])])])}),[],!1,null,null,null).exports,c={name:"GnssPaging",props:{page:{type:Number,default:1},maxRecords:{type:Number,default:25},totalResults:{type:Number,default:0},count:{type:Number,default:0},lang:{type:String,default:"en"},color:{type:String,default:"#808080"}},computed:{to:function(){return this.from+this.count-1},nbPage:function(){var n=parseInt(this.totalResults/this.recordPerPage);return n+=this.totalResults%this.recordPerPage>0?1:0,this.currentPage=parseInt(this.from/this.recordPerPage)+1,n},recordsPerPage:function(){var n={};return this.options.forEach((function(t){n[t]=t+" per page"})),n},defaultRecord:function(){return this.maxRecords}},watch:{page:function(n){this.from=(n-1)*this.maxRecords+1},maxRecords:function(n){this.recordPerPage=this.maxRecords}},created:function(){this.from=(this.page-1)*this.maxRecords+1,this.recordPerPage=this.maxRecords},mounted:function(){},destroyed:function(){},data:function(){return{from:1,currentPage:1,recordPerPage:this.maxRecords,notExactly:"",options:[10,25,50,100]}},methods:{goToFirst:function(){this.currentPage=1,this.emitChange()},goToLast:function(){console.log(this.nbPage),this.currentPage=this.nbPage,this.emitChange()},handleReset:function(n){this.currentPage=1},changePage:function(n){n<0&&1===this.currentPage||n>0&&this.currentPage===this.nbPage&&!this.notExactly||(this.currentPage+=n,this.emitChange())},nbRecordChange:function(n){this.emitChange()},emitChange:function(){this.$emit("change",{maxRecords:this.recordPerPage,page:this.currentPage})}}},d=(e(224),Object(r.a)(c,(function(){var n=this,t=n._self._c;return t("span",{staticClass:"gnss-paging"},[t("div",[t("span",{class:{disabled:1===n.currentPage?"disabled":"","mtdt-navigation":!0}},[t("span",{style:{background:n.color},on:{click:function(t){return n.goToFirst()}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-left"}})],1),n._v(" "),t("span",{style:{background:n.color},on:{click:function(t){return n.changePage(-1)}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-left"}})],1)]),n._v(" "),t("span",{staticStyle:{margin:"0 10px"}},[n._v("\n Results: "+n._s(n.from)+" to "+n._s(n.to)+" among "+n._s(n.notExactly)+n._s(n.totalResults)+"\n ")]),n._v("\n  ("),t("select",{directives:[{name:"model",rawName:"v-model",value:n.recordPerPage,expression:"recordPerPage"}],on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(n){return n.selected})).map((function(n){return"_value"in n?n._value:n.value}));n.recordPerPage=t.target.multiple?e:e[0]},n.nbRecordChange]}},n._l(n.recordsPerPage,(function(e,a){return t("option",{domProps:{value:a}},[n._v(n._s(e))])})),0),n._v(")\n  "),t("span",{class:{disabled:n.notExactly||n.currentPage!==n.nbPage&&0!==n.count?"":"disabled","mtdt-navigation":!0}},[t("span",{style:{background:n.color},on:{click:function(t){return n.changePage(1)}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-right"}})],1),n._v(" "),t("span",{style:{background:n.color},on:{click:function(t){return n.goToLast()}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-angles-right"}})],1)])])])}),[],!1,null,null,null)).exports;function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function g(n,t,e){return(t=function(n){var t=function(n,t){if("object"!==u(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var a=e.call(n,t);if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n,"string");return"symbol"===u(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var p=(g(a={name:"FileList",components:{FileForm:i.a,FileRow:l,GnssMenu:s.a,GnssPaging:d},data:function(){return{}},computed:{api:function(){return this.$store.getters.api},defaultRequest:function(){return Object.assign({page:1,maxRecords:25,orderBy:"station ASC,solution ASC"},this.$store.getters.request)}},watch:{$route:function(n,t){this.treatmentQuery(n.query)}}},"data",(function(){return{files:[],sort:{station:"ASC",solution:"ASC",name:null,productType:null,productor:null,start:null,end:null,fill:null,years:null},downloading:!1,pagination:{page:1,maxRecords:25},orderBy:[{name:"station",value:"ASC"},{name:"solution",value:"ASC"}]}})),g(a,"created",(function(){this.$route.query.page&&(this.pagination.page=parseInt(this.$route.query.page)),this.$route.query.maxRecords&&(this.pagination.maxRecords=parseInt(this.$route.query.maxRecords)),this.treatmentQuery(this.$route.query)})),g(a,"destroyed",(function(){})),g(a,"methods",{downloadPage:function(){var n=this.$el.querySelectorAll(".gnss-file a[download]");this.download(0,n),this.downloading=!0},download:function(n,t){if(t[n]){t[n].click();var e=this;setTimeout((function(){e.download(n+1,t)}),300)}else this.downloading=!1},downloadAll:function(n){},changeSort:function(n){var t=this.orderBy.findIndex((function(t){return t.name===n}));t>=0?(this.orderBy[t].value="ASC"===this.orderBy[t].value?"DESC":"ASC",1==t&&(this.orderBy=this.orderBy.reverse())):(this.orderBy.pop(),this.orderBy.unshift({name:n,value:"ASC"}));var e=this.orderBy.map((function(n){return n.name+" "+n.value})).join(","),a=Object.assign({},this.$route.query);a.orderBy=e,this.$router.push({name:"files",query:a})},display:function(n){this.files=n.files,this.pagination.tot=n.query.tot,this.pagination.page=n.query.page,this.pagination.maxRecords=n.query.maxRecords},paginationChange:function(n){var t=Object.assign({},this.$route.query);t.page=n.page,t.maxRecords=n.maxRecords,this.$router.push({name:this.$route.name,query:t})},treatmentQuery:function(n){var t=this;this.api||alert("Pas de service SensorThings!");var e=this.api+"files/",a=Object.assign({},this.defaultRequest);if(n.orderBy){var i=n.orderBy.split(/\s*,\s*/),s={};for(var o in this.orderBy=[],i.forEach((function(n){console.log(n);var t=n.split(/\s+/);s[t[0]]=t[1].toUpperCase()})),this.sort)s[o]?(this.sort[o]=s[o],this.orderBy.push({name:o,value:s[o]})):this.sort[o]=null}a=Object.assign({},this.defaultRequest),a=Object.assign(a,n),this.$http.get(e,{params:a}).then((function(n){t.display(n.body)}),(function(n){alert("Erreur de chargement: "+n.status)}))},close:function(n){console.log(n),this.$router.push({name:"home",query:this.$store.state.queryList})}}),a),f=(e(226),e(228),Object(r.a)(p,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"page-list",staticStyle:{width:"100%",position:"relative",overflow:"hidden"}},[t("file-form",{attrs:{mode:"map"}}),n._v(" "),t("gnss-menu",{attrs:{top:55}}),n._v(" "),t("div",{staticClass:"station-content"},[t("div",{staticClass:"station-header"},[t("span",{staticClass:"close button",staticStyle:{"margin-right":"20px"},on:{click:function(t){return n.close(t)}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-close"}})],1),n._v(" "),t("h2",[n._v("List of files")])]),n._v(" "),t("div",{staticClass:"station-body",staticStyle:{"min-height":"calc(100vh - 70px)"}},[t("div",[t("gnss-paging",{attrs:{color:"#b8412c",page:n.pagination.page,"max-records":n.pagination.maxRecords,count:n.files.length,"total-results":n.pagination.tot},on:{change:n.paginationChange}}),n._v(" "),t("button",{attrs:{type:"button",disabled:n.downloading,title:"Download only the files in the page"},on:{click:n.downloadPage}},[n._v("\n          Download All\n          "),t("font-awesome-icon",{attrs:{icon:"fa-solid fa-download"}})],1)],1),n._v(" "),t("div",{staticClass:"array-list"},[t("div",{staticClass:"gnss-file header"},[t("div",{staticClass:"gnss-file-title"},[n._v("Name  \n\t       "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.name},on:{click:function(t){return n.changeSort("name")}}},[n._v(n._s("DESC"===n.sort.name?"↑":"↓"))])]),n._v(" "),t("div",{staticClass:"gnss-file-2"},[n._v("Station \n\t        "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.station},on:{click:function(t){return n.changeSort("station")}}},[n._v(n._s("DESC"===n.sort.station?"↑":"↓"))])]),n._v(" "),t("div",{staticClass:"gnss-file-3-header"},[t("div",{staticStyle:{"margin-top":"5px"}},[n._v("Solution \n\t         "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.solution},on:{click:function(t){return n.changeSort("solution")}}},[n._v(n._s("DESC"===n.sort.solution?"↑":"↓"))])]),n._v(" "),t("div",[n._v("ProductType\n\t          "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.productType},on:{click:function(t){return n.changeSort("productType")}}},[n._v(n._s("DESC"===n.sort.productType?"↑":"↓"))])])]),n._v(" "),t("div",{staticClass:"gnss-file-4-header"},[t("div",{staticStyle:{"margin-top":"5px"}},[n._v("Start\n\t        "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.start},on:{click:function(t){return n.changeSort("start")}}},[n._v(n._s("DEC"===n.sort.start?"↑":"↓"))]),n._v("\n           End  "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.end},on:{click:function(t){return n.changeSort("end")}}},[n._v(n._s("DESC"===n.sort.end?"↑":"↓"))])]),n._v(" "),t("div",[n._v("\n\t          Years"),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.years},on:{click:function(t){return n.changeSort("years")}}},[n._v(n._s("DESC"===n.sort.years?"↑":"↓"))]),n._v("\n            FillRate"),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.fill},on:{click:function(t){return n.changeSort("fill")}}},[n._v(n._s("DESC"===n.sort.fill?"↑":"↓"))])])]),n._v(" "),t("div",{staticClass:"gnss-file-5"},[n._v("Productor\n\t       "),t("span",{staticClass:"gnss-sort",class:{unactive:!n.sort.productor},on:{click:function(t){return n.changeSort("productor")}}},[n._v(n._s("DESC"===n.sort.productor?"↑":"↓"))])])]),n._v(" "),t("div",{staticStyle:{"max-height":"calc(100vh - 140px)","overflow-y":"scroll"}},n._l(n.files,(function(n,e){return t("file-row",{key:e,attrs:{file:n}})})),1)])])])],1)}),[],!1,null,"a1bb2adc",null));t.default=f.exports}}]);
//# sourceMappingURL=1.gnss-components-vjs.js.map